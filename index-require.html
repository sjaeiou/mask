<!doctype HTML>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no"/>
<meta content="telephone=no" name="format-detection" />
<title>移动端刮刮卡 - require.js 版本</title>
<style>
*{margin:0;padding:0;}
.mask{width:160px;height:240px;position:relative;margin:10px auto;}
.mask img{display:block;width:100%;height:100%;}
.mask canvas{width:100%;height:100%;position:absolute;top:0px;left:0px;}
.btn{width:300px;height:25px;line-height:25px;background-color:#05a;border-radius:3px;color:#fff;text-align:center;margin:10px auto;font-size:12px;cursor:pointer;}
.btn:hover{background-color:red;}
</style>
</head>
<body>

<div class="mask">
    <img src="./img/bg.jpg" alt="" />
    <canvas id="JcanvasA"></canvas>
</div>
<div class="btn" id="JbtnA">点击封锁</div>
<div class="btn" id="JbtnB">点击解锁</div>
<div class="btn" id="JbtnC">点击改变涂抹笔触</div>
<div class="btn" id="JbtnD">点击自动刮完</div>
<div class="btn" id="JbtnE">点击重新初始化</div>
<div class="btn" id="JbtnZ">点击重新初始化并改变覆盖内容</div>

<script src="./src/require.js" charset="utf-8"></script>
<script type="text/javascript">
require(['./src/mask.js'], function(Mask) {
    function $$(id) {
        return (typeof id == "object") ? id : document.getElementById(id)
    }

    var maskA = new Mask($$("JcanvasA"), {
        complete: function() {
            console.log("初始化开始")
        },
    })

    $$("JbtnA").addEventListener("click", function() {
        maskA.disable()
    }, false)

    $$("JbtnB").addEventListener("click", function() {
        maskA.enable()
    }, false)

    $$("JbtnC").addEventListener("click", function() {
        maskA.changeConfig({
            radius: 50
        })
    }, false)

    $$("JbtnD").addEventListener("click", function() {
        maskA.clear()
    }, false)

    $$("JbtnE").addEventListener("click", function() {
        maskA.changeConfig({
            fillStyle: "color",
            fillContent: "#f60"
        })
        maskA.init()
    }, false)

    $$("JbtnZ").addEventListener("click", function() {
        maskA.changeConfig({
            fillStyle: "image",
            fillContent: "./img/mask.jpg"
        })
        maskA.init()
    }, false)

})
</script>
</body>
</html>
